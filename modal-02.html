<div class="modal-header">
	<h5 class="modal-title" id="modalLabel">설비정보</h5>
	<button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
</div>
<div class="modal-body p-0">
	<div class="modal-facility">
		<button type="button" class="btn btn-primary toggle-side" id="toggleSidePanel" data-bs-toggle="tooltip" data-bs-placement="top" title="트리메뉴 열기">
			<span class="material-symbols-outlined">
			menu_open
			</span>
		</button>
		<div class="side-panel left" id="sidePanel">
			<label for="search" class="form-label visually-hidden">설비명 입력</label>
			<input class="form-control" list="datalistOptions" id="search" placeholder="설비명 입력">
			<datalist id="datalistOptions">
				<option value="Turbine 1">
				<option value="Steam Turbine 5">
				<option value="Gas Turbine 2">
				<option value="HRSG 1">
				<option value="ACC">
			</datalist>
			<div id="jstree" class="jstree-box border bg-white rounded d-flex"></div>
		</div>
		<div class="contents-panel" id="contentsPanel">
			<div id="node-content">
				<div id="content-display">
					<!-- add menu text -->
					<div class="d-flex justify-content-between align-items-center">
						<h2 class="box-title01">좌측 패널에서 설비명을 검색해 주세요.</h2>
						<button type="button" class="btn btn-primary">
							<span c	lass="material-symbols-outlined">
							view_in_ar
							</span>
							이동
						</button>
					</div>

					
					<div id="content"></div>
				</div>
			</div>
		</div>
	</div>

</div>
<!-- 
<div class="modal-footer">
<button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
<button type="button" class="btn btn-primary">Save changes</button>
</div>
-->

<script>

	$(document).ready(function () {
		// 트리메뉴 툴팁 초기화
		var tooltipTriggerEl = document.getElementById('toggleSidePanel');
		if (tooltipTriggerEl) {
			var tooltip = new bootstrap.Tooltip(tooltipTriggerEl);
		} else {
			console.warn("메뉴를 불러오지 못했음");
		}

		let isCollapsed = true; // 초기 상태를 '닫힘'으로 설정
		$('.modal-facility').find('.material-symbols-outlined').css('transform', 'scaleX(-1)');

		$('#toggleSidePanel').on('click', function () {
			if (isCollapsed) { // 닫혀 있을 때 패널 열기
				$('.modal').removeClass('modal-move');
				$('.modal-dialog').removeClass('folded');
				$('#contentsPanel').show(); // 너비를 80픽셀로 줄임
				$(this).attr('title', '패널 열기'); // 타이틀 변경
				$(this).find('.material-symbols-outlined').css('transform', 'scaleX(1)');
			} else { // 열려 있을 때 패널 닫기
				$('.modal').addClass('modal-move').css('left', '').css('top', '');
				$('.modal-dialog').addClass('folded');
				$('#contentsPanel').hide(); // 기본 너비로 복원
				$(this).attr('title', '패널 닫기'); // 타이틀 변경
				$(this).find('.material-symbols-outlined').css('transform', 'scaleX(-1)');
			}
			isCollapsed = !isCollapsed; // 상태 토글
		});
	});


</script>
